generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model EvieGuild {
  id                        String        @unique
  bannedWordList            String[]
  color                     String?
  defaultBannedWordList     Boolean?
  goodbyeChannel            String?
  goodbyeMessage            String?
  goodbyeMessageEnabled     Boolean?
  joinRoleEnabled           Boolean?
  joinRoleID                String?
  phishingDetectionEnabled  Boolean?
  welcomeChannel            String?
  welcomeMessage            String?
  welcomeMessageEnabled     Boolean?
  welcomeMessagePingEnabled Boolean?
  tags                      EvieTag[]
  tempBans                  EvieTempBan[]
  importedMessages          String[]
  evieNotes                 EvieNote[]
  logChannelID              String?
  staffRoleID               String?
}

model EvieTag {
  id        String     @unique
  name      String
  content   String
  embed     Boolean
  evieGuild EvieGuild? @relation(fields: [guildId], references: [id])
  guildId   String?
}

model EvieTempBan {
  id        String     @unique
  reason    String
  userId    String
  guildId   String?
  expiresAt DateTime?
  EvieGuild EvieGuild? @relation(fields: [guildId], references: [id])
  bannedBy  String?

  @@unique([userId, guildId])
}

model EvieNote {
  id        String     @unique
  userId    String
  guildId   String?
  content   String
  EvieGuild EvieGuild? @relation(fields: [guildId], references: [id])

  @@unique([userId, guildId])
}
